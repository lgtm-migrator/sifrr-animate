/*! Sifrr.animate v0.0.2 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self).Sifrr=t.Sifrr||{},t.Sifrr.animate=e())}(this,function(){"use strict";const t={};var e=class{constructor(e){const r=e.join("_");return t[r]||(this.setProps(...e),t[r]=this.final.bind(this)),t[r]}setProps(t,e,r,i){let n={x1:t,y1:e,x2:r,y2:i,A:(t,e)=>1-3*e+3*t,B:(t,e)=>3*e-6*t,C:t=>3*t,CalcBezier:(t,e,r)=>((this.A(e,r)*t+this.B(e,r))*t+this.C(e))*t,GetSlope:(t,e,r)=>3*this.A(e,r)*t*t+2*this.B(e,r)*t+this.C(e)};Object.assign(this,n)}final(t){return this.x1==this.y1&&this.x2==this.y2?t:this.CalcBezier(this.GetTForX(t),this.y1,this.y2)}GetTForX(t){let e=t;for(let r=0;r<4;++r){let r=this.GetSlope(e,this.x1,this.x2);if(0==r)return e;e-=(this.CalcBezier(e,this.x1,this.x2)-t)/r}return e}},r={linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],spring:[.3642,0,.6358,1]},i=t=>new Promise(e=>setTimeout(e,t));const n=/((?:[+\-*\/]=)?-?\d+\.?\d*)/,o=new Set;window.requestAnimationFrame(function t(e){o.forEach(t=>t(e)),window.requestAnimationFrame(t)});var s=function({target:t,prop:s,from:a,to:u,time:l=300,type:c="spring",onUpdate:f,round:h=!1,delay:p=0}){const y=u.toString().split(n),m=y.length,d=[],A=[],b=[],g=(a||t[s]||"").toString().split(n),w="function"==typeof f;for(let t=0;t<m;t++){const e=Number(g[t])||0;let r=Number(y[t]);if("="===y[t][1])switch(r=Number(y[t].slice(2)),y[t][0]){case"+":r=e+r;break;case"-":r=e-r;break;case"*":r*=e;break;case"/":r=e/r}isNaN(r)||!y[t]?d.push(y[t]):(A.push(e),b.push(r-e))}const x={raw:d};return i(p).then(()=>new Promise((i,n)=>{if(r[c]&&(c=r[c]),Array.isArray(c))c=new e(c);else if("function"!=typeof c)return n(Error("type should be one of "+Object.keys(r).toString()+" or Bezier Array or Function, given "+c));let a;const u=function(e){const r=(e-(a=a||e-17))/l,p=c(r>=1?1:r),y=b.map((t,e)=>{const r=p*t+A[e];return h?Math.round(r):r}),m=String.raw(x,...y);try{t[s]=Number(m)||m,w&&f(t,s,t[s]),r>=1&&i(o.delete(u))}catch(t){o.delete(u),n(t)}};o.add(u)}))};function a({targets:t,target:e,to:r,time:i,type:n,onUpdate:o,round:a,delay:u}){t=t?Array.from(t):[e];let l=r,c=u,f=i;return Promise.all(t.map((t,e)=>("function"==typeof r&&(l=r.call(t,e)),"function"==typeof u&&(c=u.call(t,e)),"function"==typeof i&&(f=i.call(t,e)),function t(e,r,i,u){const l=[];for(let c in r){let f,h;Array.isArray(r[c])?[f,h]=r[c]:h=r[c],"object"!=typeof r[c]||Array.isArray(r[c])?l.push(s({target:e,prop:c,to:h,time:u,type:n,from:f,onUpdate:o,round:a,delay:i})):l.push(t(e[c],r[c],i,u))}return Promise.all(l)}(t,l,c,f))))}return a.types=r,a.wait=t=>new Promise(e=>setTimeout(e,t)),a.animate=a,a.keyframes=t=>{let e=Promise.resolve(!0);return t.forEach(t=>{Array.isArray(t)&&(e=e.then(()=>Promise.all(t.map(a)))),e=e.then(()=>a(t))}),e},a.loop=t=>t().then(()=>a.loop(t)),a});
/*! (c) @aadityataparia */
