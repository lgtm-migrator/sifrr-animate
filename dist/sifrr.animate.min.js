/*! sifrr-animate v0.0.3 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-animate */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self).Sifrr=t.Sifrr||{},t.Sifrr.animate=e())}(this,function(){"use strict";const t={};var e=class{constructor(e){const r=e.join("_");return t[r]||(this.setProps(...e),t[r]=this.final.bind(this)),t[r]}setProps(t,e,r,n){let i={x1:t,y1:e,x2:r,y2:n,A:(t,e)=>1-3*e+3*t,B:(t,e)=>3*e-6*t,C:t=>3*t,CalcBezier:(t,e,r)=>((this.A(e,r)*t+this.B(e,r))*t+this.C(e))*t,GetSlope:(t,e,r)=>3*this.A(e,r)*t*t+2*this.B(e,r)*t+this.C(e)};Object.assign(this,i)}final(t){return this.x1==this.y1&&this.x2==this.y2?t:this.CalcBezier(this.GetTForX(t),this.y1,this.y2)}GetTForX(t){let e=t;for(let r=0;r<4;++r){let r=this.GetSlope(e,this.x1,this.x2);if(0==r)return e;e-=(this.CalcBezier(e,this.x1,this.x2)-t)/r}return e}},r={linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],spring:[.3642,0,.6358,1]};const n=/((?:[+\-*\/]=)?-?\d+\.?\d*)/,i=new Set;window.requestAnimationFrame(function t(e){i.forEach(t=>t(e)),window.requestAnimationFrame(t)});var o=function({target:t,prop:o,from:s,to:a,time:c=300,type:u="spring",onUpdate:l,round:f=!1,delay:p=0}){const h=a.toString().split(n),y=h.length,m=[],d=[],A=[],b=(s||t[o]||"").toString().split(n),g="function"==typeof l;for(let t=0;t<y;t++){const e=Number(b[t])||0;let r;if("="===h[t][1])switch(r=Number(h[t].slice(2)),h[t][0]){case"+":r=e+r;break;case"-":r=e-r;break;case"*":r*=e;break;case"/":r=e/r}else r=Number(h[t]);isNaN(r)||!h[t]?m.push(h[t]):(d.push(e),A.push(r-e))}const w={raw:m};return new Promise((n,s)=>{if(r[u]&&(u=r[u]),Array.isArray(u))u=new e(u);else if("function"!=typeof u)return s(Error("type should be one of "+Object.keys(r).toString()+" or Bezier Array or Function, given "+u));const a=performance.now()+p,h=function(e){const r=(e-a)/c,p=u(r>1?1:r);if(r<0)return;const y=A.map((t,e)=>{const r=p*t+d[e];return f?Math.round(r):r}),m=String.raw(w,...y);try{t[o]=Number(m)||m,g&&l(t,o,t[o]),r>=1&&n(i.delete(h))}catch(t){i.delete(h),s(t)}};i.add(h)})};function s({targets:t,target:e,to:r,time:n,type:i,onUpdate:s,round:a,delay:c}){t=t?Array.from(t):[e];let u=r,l=c,f=n;return Promise.all(t.map((t,e)=>("function"==typeof r&&(u=r.call(t,e)),"function"==typeof c&&(l=c.call(t,e)),"function"==typeof n&&(f=n.call(t,e)),function t(e,r,n,c){const u=[];for(let l in r){let f,p;Array.isArray(r[l])?[f,p]=r[l]:p=r[l],"object"!=typeof r[l]||Array.isArray(r[l])?u.push(o({target:e,prop:l,to:p,time:c,type:i,from:f,onUpdate:s,round:a,delay:n})):u.push(t(e[l],r[l],n,c))}return Promise.all(u)}(t,u,l,f))))}return s.types=r,s.wait=t=>!(t>0)||new Promise(e=>setTimeout(e,t)),s.animate=s,s.keyframes=t=>{let e=Promise.resolve(!0);return t.forEach(t=>{Array.isArray(t)&&(e=e.then(()=>Promise.all(t.map(s)))),e=e.then(()=>s(t))}),e},s.loop=t=>t().then(()=>s.loop(t)),s});
/*! (c) @aadityataparia */
