/*! sifrr-animate v0.0.3 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-animate */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e=e||self).Sifrr=e.Sifrr||{},e.Sifrr.animate=t())}(this,function(){"use strict";const e={};class t{constructor(t){const r=t.join("_");return e[r]||(this.setProps(...t),e[r]=this.final.bind(this)),e[r]}setProps(e,t,r,i){let n={x1:e,y1:t,x2:r,y2:i,A:(e,t)=>1-3*t+3*e,B:(e,t)=>3*t-6*e,C:e=>3*e,CalcBezier:(e,t,r)=>((this.A(t,r)*e+this.B(t,r))*e+this.C(t))*e,GetSlope:(e,t,r)=>3*this.A(t,r)*e*e+2*this.B(t,r)*e+this.C(t)};Object.assign(this,n)}final(e){return this.x1==this.y1&&this.x2==this.y2?e:this.CalcBezier(this.GetTForX(e),this.y1,this.y2)}GetTForX(e){let t=e;for(let r=0;r<4;++r){let r=this.GetSlope(t,this.x1,this.x2);if(0==r)return t;t-=(this.CalcBezier(t,this.x1,this.x2)-e)/r}return t}}const r=/* */Object.freeze({linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],spring:[.3642,0,.6358,1]}),i=/((?:[+\-*\/]=)?-?\d+\.?\d*)/,n=new Set;function o({target:e,prop:o,from:s,to:a,time:u=300,type:c="spring",onUpdate:f,round:l=!1,delay:p=0}){const h=a.toString().split(i),y=h.length,d=[],m=[],A=[],b=(s||e[o]||"").toString().split(i),g="function"==typeof f;for(let e=0;e<y;e++){const t=Number(b[e])||0;let r;if("="===h[e][1])switch(r=Number(h[e].slice(2)),h[e][0]){case"+":r=t+r;break;case"-":r=t-r;break;case"*":r*=t;break;case"/":r=t/r}else r=Number(h[e]);isNaN(r)||!h[e]?d.push(h[e]):(m.push(t),A.push(r-t))}const w={raw:d};return new Promise((i,s)=>{if(r[c]&&(c=r[c]),Array.isArray(c))c=new t(c);else if("function"!=typeof c)return s(Error("type should be one of "+Object.keys(r).toString()+" or Bezier Array or Function, given "+c));const a=performance.now()+p,h=function(t){const r=(t-a)/u,p=c(r>1?1:r);if(r<0)return;const y=A.map((e,t)=>{const r=p*e+m[t];return l?Math.round(r):r}),d=String.raw(w,...y);try{e[o]=Number(d)||d,g&&f(e,o,e[o]),r>=1&&i(n.delete(h))}catch(e){n.delete(h),s(e)}};n.add(h)})}function s({targets:e,target:t,to:r,time:i,type:n,onUpdate:s,round:a,delay:u}){e=e?Array.from(e):[t];let c=r,f=u,l=i;return Promise.all(e.map((e,t)=>("function"==typeof r&&(c=r.call(e,t)),"function"==typeof u&&(f=u.call(e,t)),"function"==typeof i&&(l=i.call(e,t)),function e(t,r,i,u){const c=[];for(let f in r){let l,p;Array.isArray(r[f])?[l,p]=r[f]:p=r[f],"object"!=typeof r[f]||Array.isArray(r[f])?c.push(o({target:t,prop:f,to:p,time:u,type:n,from:l,onUpdate:s,round:a,delay:i})):c.push(e(t[f],r[f],i,u))}return Promise.all(c)}(e,c,f,l))))}return window.requestAnimationFrame(function e(t){n.forEach(e=>e(t)),window.requestAnimationFrame(e)}),s.types=require("./types"),s.wait=require("./wait").default,s.animate=s,s.keyframes=e=>{let t=Promise.resolve(!0);return e.forEach(e=>{Array.isArray(e)&&(t=t.then(()=>Promise.all(e.map(s)))),t=t.then(()=>s(e))}),t},s.loop=e=>e().then(()=>s.loop(e)),s});
/*! (c) @aadityataparia */
