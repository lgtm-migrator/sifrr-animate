{"version":3,"file":"sifrr.animate.js","sources":["../src/bezier.js","../src/types.js","../src/wait.js","../src/animateone.js","../src/animate.js"],"sourcesContent":["const beziers = {};\n\nclass Bezier {\n  constructor(args){\n    const key = args.join('_');\n    if (!beziers[key]) {\n      this.setProps(...args);\n      beziers[key] = this.final.bind(this);\n    }\n    return beziers[key];\n  }\n\n  setProps(x1, y1, x2, y2) {\n    let props = {\n      x1, y1, x2, y2,\n      A: (x1, x2) => 1.0 - 3.0 * x2 + 3.0 * x1,\n      B: (x1, x2) => 3.0 * x2 - 6.0 * x1,\n      C: (x1) => 3.0 * x1,\n      CalcBezier: (t, x1, x2) => ((this.A(x1, x2) * t + this.B(x1, x2)) * t + this.C(x1)) * t,\n      GetSlope: (t, x1, x2) => 3.0 * this.A(x1, x2) * t * t + 2.0 * this.B(x1, x2) * t + this.C(x1)\n    };\n    Object.assign(this, props);\n  }\n\n  final(x) {\n    if (this.x1 == this.y1 && this.x2 == this.y2) return x;\n    return this.CalcBezier(this.GetTForX(x), this.y1, this.y2);\n  }\n\n  GetTForX(xx) {\n    let t = xx;\n    for (let i = 0; i < 4; ++i) {\n      let slope = this.GetSlope(t, this.x1, this.x2);\n      if (slope == 0) return t;\n      let x = this.CalcBezier(t, this.x1, this.x2) - xx;\n      t -= x / slope;\n    }\n    return t;\n  }\n}\n\nmodule.exports = Bezier;\n","module.exports = {\n  linear: [0, 0, 1, 1],\n  ease: [.25, .1, .25, 1],\n  easeIn: [.42, 0, 1, 1],\n  easeOut: [0, 0, .58, 1],\n  easeInOut: [.42, 0, .58, 1],\n  spring: [.3642, 0, .6358, 1]\n};\n","module.exports = (t) => new Promise(res => setTimeout(res, t));\n","const Bezier = require('./bezier');\nconst types = require('./types');\nconst wait = require('./wait');\nconst digitRgx = /((?:[+\\-*/]=)?-?\\d+\\.?\\d*)/;\nconst frames = new Set();\n\nfunction runFrames(currentTime) {\n  frames.forEach(f => f(currentTime));\n  window.requestAnimationFrame(runFrames);\n}\nwindow.requestAnimationFrame(runFrames);\n\nfunction animateOne({\n  target,\n  prop,\n  from,\n  to,\n  time = 300,\n  type = 'spring',\n  onUpdate,\n  round = false,\n  delay = 0 // number\n}) {\n  const toSplit = to.toString().split(digitRgx), l = toSplit.length, raw = [], fromNums = [], diffs = [];\n  const fromSplit = (from || target[prop] || '').toString().split(digitRgx);\n  const onUp = typeof onUpdate === 'function';\n  for (let i = 0; i < l; i++) {\n    const fn = Number(fromSplit[i]) || 0;\n    let tn = Number(toSplit[i]);\n    if (toSplit[i][1] === '=') {\n      tn = Number(toSplit[i].slice(2));\n      switch (toSplit[i][0]) {\n      case '+':\n        tn = fn + tn;\n        break;\n      case '-':\n        tn = fn - tn;\n        break;\n      case '*':\n        tn = fn * tn;\n        break;\n      case '/':\n        tn = fn / tn;\n        break;\n      }\n    }\n    if (isNaN(tn) || !toSplit[i]) raw.push(toSplit[i]);\n    else {\n      fromNums.push(fn);\n      diffs.push(tn - fn);\n    }\n  }\n\n  const rawObj = { raw };\n  return wait(delay).then(() => new Promise((resolve, reject) => {\n    if (types[type]) type = types[type];\n    if (Array.isArray(type)) type = new Bezier(type);\n    else if (typeof type !== 'function') return reject(Error('type should be one of ' + Object.keys(types).toString() + ' or Bezier Array or Function, given ' + type));\n\n    let startTime;\n    const frame = function(currentTime) {\n      startTime = startTime || currentTime - 17;\n      const percent = (currentTime - startTime) / time, bper = type(percent >= 1 ? 1 : percent);\n      const next = diffs.map((d, i) => {\n        const n = bper * d + fromNums[i];\n        return round ? Math.round(n) : n;\n      });\n      const val = String.raw(rawObj, ...next);\n      try {\n        target[prop] = Number(val) || val;\n        if (onUp) onUpdate(target, prop, target[prop]);\n        if (percent >= 1) resolve(frames.delete(frame));\n      } catch(e) {\n        frames.delete(frame);\n        reject(e);\n      }\n    };\n    frames.add(frame);\n  }));\n}\n\nmodule.exports = animateOne;\n","const animateOne = require('./animateone');\n\nfunction animate({\n  targets,\n  target,\n  to, // object or function\n  time, // number or function\n  type,\n  onUpdate,\n  round,\n  delay // number or function\n}) {\n  targets = targets ? Array.from(targets) : [target];\n  function iterate(tg, props, d, ntime) {\n    const promises = [];\n    for (let prop in props) {\n      let from, final;\n      if (Array.isArray(props[prop])) [from, final] = props[prop];\n      else final = props[prop];\n      if (typeof props[prop] === 'object' && !Array.isArray(props[prop])) {\n        promises.push(iterate(tg[prop], props[prop], d, ntime));\n      } else {\n        promises.push(animateOne({\n          target: tg,\n          prop,\n          to: final,\n          time: ntime,\n          type,\n          from,\n          onUpdate,\n          round,\n          delay: d\n        }));\n      }\n    }\n    return Promise.all(promises);\n  }\n  let numTo = to, numDelay = delay, numTime = time;\n  return Promise.all(targets.map((target, i) => {\n    if (typeof to === 'function') numTo = to.call(target, i);\n    if (typeof delay === 'function') numDelay = delay.call(target, i);\n    if (typeof time === 'function') numTime = time.call(target, i);\n    return iterate(target, numTo, numDelay, numTime);\n  }));\n}\n\nanimate.types = require('./types');\nanimate.wait = require('./wait');\nanimate.animate = animate;\nanimate.keyframes = (arrOpts) => {\n  let promise = Promise.resolve(true);\n  arrOpts.forEach(opts => {\n    if (Array.isArray(opts)) promise = promise.then(() => Promise.all(opts.map(animate)));\n    promise = promise.then(() => animate(opts));\n  });\n  return promise;\n};\nanimate.loop = (fxn) => fxn().then(() => animate.loop(fxn));\n\nmodule.exports = animate;\n"],"names":["beziers","Bezier","constructor","args","key","join","setProps","final","bind","x1","y1","x2","y2","props","A","B","C","CalcBezier","t","GetSlope","Object","assign","x","GetTForX","xx","i","slope","linear","ease","easeIn","easeOut","easeInOut","spring","Promise","res","setTimeout","digitRgx","frames","Set","runFrames","currentTime","forEach","f","window","requestAnimationFrame","animateOne","target","prop","from","to","time","type","onUpdate","round","delay","toSplit","toString","split","l","length","raw","fromNums","diffs","fromSplit","onUp","fn","Number","tn","slice","isNaN","push","rawObj","wait","then","resolve","reject","types","Array","isArray","Error","keys","startTime","frame","percent","bper","next","map","d","n","Math","val","String","delete","e","add","animate","targets","iterate","tg","ntime","promises","all","numTo","numDelay","numTime","call","require$$0","require$$1","keyframes","arrOpts","promise","opts","loop","fxn"],"mappings":"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"}